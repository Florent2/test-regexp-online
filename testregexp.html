<html>
  <head>
    <title>Test RegExp</title>
    <style type="text/css">
      div#examples span.ok {color: green;}
      div#examples span.not_ok {color: red;}      
      div#counter_examples span.ok {color: red;}
      div#counter_examples span.not_ok {color: green;}      
    </style>
  </head>
  <body>

    <h1>Test your RegExp!</h1>
    <input type="text" name="regexp" value="" id="regexp" size='50'>
    <div id="examples">
      <h2>Examples:</h2>
      <p>
        <input type="text" value="" size='50'>
        <span class='result ok'>matched</span>              
        <span class='result not_ok'>not matched</span>
      </p>                         
      <p>                          
        <input type="text" value="" size='50'>
        <span class='result ok'>matched</span>              
        <span class='result not_ok'>not matched</span>
      </p>
      <a href="#" class="add_example">Add example</a>
    </div>
    <div id="counter_examples">
      <h2>Counter Examples:</h2>
      <p>
        <input type="text" value="" size='50'>
        <span class='result ok'>matched</span>              
        <span class='result not_ok'>not matched</span>
      </p>                         
      <p>                          
        <input type="text" value="" size='50'>
        <span class='result ok'>matched</span>              
        <span class='result not_ok'>not matched</span>
      </p>
      <a href="#" class="add_example">Add counter example</a>      
    <div>

    <script src="jquery.js" type="text/javascript"></script> 
    <script src="application.js" type="text/javascript"></script>     
    <script type="text/javascript" charset="utf-8">
      function update_input(input) {
        value = input.val();
        spans = input.parent().children('span');
        if(value == '' || $('#regexp').val() == '') {
          spans.hide();
        } else {
          regexp = new RegExp($('#regexp').val());
          if(regexp.test(value)) {
            spans.filter(".ok").show('fast');
            spans.filter(".not_ok").hide();
          } else {
            spans.filter(".not_ok").show('fast');
            spans.filter(".ok").hide();                
          }
        }
      }       
      $(document).ready(function() {
        $('#regexp').focus();
        $('span.result').hide();
        $('input:not(#regexp)').live("keyup", function() {
          update_input($(this));
        });        
        $('input#regexp').keyup(function() {
          $('input:not(#regexp)').each(function(i) {
            update_input($(this));
          });          
        });
        $('a.add_example').click(function() {
          new_example = $('div#examples p:last').clone();
          new_example.children('input').attr('value', '');
          new_example.children('span').hide();
          new_example.insertBefore($(this));
          new_example.children("input").focus();
        });
      });
    </script>
  </body>
</html>